# 開発タスク管理

## ステータス凡例
- 🔴 未着手
- 🟡 進行中
- 🟢 完了
- ⏸️ 保留

---

## フェーズ1：プロジェクト基盤構築

### 1.1 環境構築
- 🟢 Create React Appでプロジェクト作成
- 🟢 TypeScript設定の調整
- 🔴 ESLint / Prettier設定
- 🟢 Git初期化とリポジトリ設定

### 1.2 ディレクトリ構造の設計
- 🟢 `src/components/` - 再利用可能なコンポーネント
- 🟢 `src/pages/` - ページコンポーネント
- 🟢 `src/stages/` - 各ステージのコンポーネント
- 🟢 `src/hooks/` - カスタムフック
- 🟢 `src/utils/` - ユーティリティ関数
- 🟢 `src/types/` - 型定義
- 🟢 `src/styles/` - グローバルスタイル（デザイントークン含む）
- 🔴 `src/assets/` - 画像やアイコン

### 1.3 ルーティング設定
- 🟢 React Routerのインストールと設定
- 🟢 ルート定義（スタート、ステージ1〜5、結果画面）
- 🟢 ステージ遷移ロジックの実装

### 1.4 状態管理
- 🟢 Context API または React Hooks による状態管理の設計
- 🟢 ゲーム進行状態の管理
- 🟢 ニックネームの管理
- 🟢 プレイ時間の計測

---

## フェーズ2：共通機能の実装

### 2.1 スタート画面
- 🟢 タイトル表示コンポーネント
- 🟢 ニックネーム入力欄（ランダム名前生成機能）
- 🟢 ゲームスタートボタン
- 🔴 ローカルストレージへのニックネーム保存

### 2.2 共通UIコンポーネント
- 🟢 ボタンコンポーネント（各ステージ内で実装）
- 🟢 入力フォームコンポーネント（各ステージ内で実装）
- 🟢 モーダルコンポーネント（DummyPageModal実装済み）
- 🟢 ヒント表示トグルコンポーネント（HintToggle実装済み）
- 🔴 ローディング表示
- 🔴 トースト通知

### 2.3 ユーティリティ関数
- 🟢 ランダム名前生成関数
- 🟢 時間計測関数
- 🔴 ローカルストレージ操作関数

---

## フェーズ3：ステージ実装

### 3.1 ステージ1：『BuyMore』
- 🟢 レイアウト設計（ECサイト風）
- 🟢 フッターに小さな「退会」リンクを配置
- 🟢 「アカウント情報」ページの実装
- 🟢 目立たない退会ボタンの実装
- 🟢 クリア判定とステージ遷移

### 3.2 ステージ2：『Info-Sphere』
- 🟢 レイアウト設計（ニュースアプリ風）
- 🟢 退会ページの実装
- 🟢 不安を煽るメッセージの表示
- 🟢 「退会しない」ボタンを強調表示
- 🟢 目立たない「退会する」リンク
- 🟢 クリア判定とステージ遷移

### 3.3 ステージ3：『Fan-Circle』
- 🟢 レイアウト設計（SNS風）
- 🟢 退会理由アンケートフォームの実装
- 🟢 長文必須回答の実装
- 🟢 人間関係に訴えかけるメッセージ表示
- 🟢 アンケート送信後の皮肉なメッセージ
- 🟢 クリア判定とステージ遷移

### 3.4 ステージ4：『Sky-Cheap』
- 🟢 レイアウト設計（航空券予約サイト風）
- 🟢 退会処理ページの実装
- 🟢 「プレミアム退会サポート」のこっそりチェックボックス
- 🟢 偽の「退会する」ボタン（トップページに戻る）
- 🟢 利用規約内に隠されたテキストリンク
- 🟢 クリア判定とステージ遷移

### 3.5 ステージ5：『Everything』
- 🟢 レイアウト設計（総合プラットフォーム風）
- 🟢 退会ページが存在しない仕様
- 🟢 FAQページの実装
- 🟢 「サポートセンターへの電話が必要」の表示
- 🟢 電話UIの実装（ダイヤルパッド等）
- 🟢 保留音の再生（アニメーション実装）
- 🟢 謎解きギミックの実装（特定のタイミングで特定の番号）
- 🟢 クリア判定とステージ遷移

---

## フェーズ4：結果画面と共有機能

### 4.1 結果画面
- 🟢 クリア時間の表示
- 🟢 ニックネームの表示
- 🟢 全体の所要時間の計算と表示
- 🟢 エンディングメッセージの表示
- 🟢 「本当に自由になったのか？」という演出

### 4.2 SNS共有機能
- 🟢 Twitter(X)共有ボタンの実装
- 🟢 共有テキストの生成（プレイ結果を含む）
- 🟢 共有UIのデザイン（他のゲームを参考）

---

## フェーズ5：演出とポリッシュ

### 5.1 アニメーション
- 🔴 ページ遷移アニメーション
- 🟢 ボタンホバーエフェクト
- 🔴 モーダル表示アニメーション
- 🟢 クリア時の演出（Stage5で実装）

### 5.2 サウンド（優先度低）
- ⏸️ BGMの追加
- ⏸️ 効果音の追加
- ⏸️ 電話の保留音

### 5.3 アクセシビリティ
- 🟡 キーボード操作対応（基本的な操作は可能）
- 🔴 フォーカス表示の最適化
- 🔴 ARIAラベルの追加

---

## フェーズ6：テストとデバッグ

### 6.1 機能テスト
- 🔴 各ステージのクリア確認
- 🔴 ニックネーム機能の動作確認
- 🔴 時間計測の正確性確認
- 🔴 共有機能の動作確認

### 6.2 ブラウザ互換性テスト
- 🔴 Chrome
- 🔴 Firefox
- 🔴 Safari
- 🔴 Edge

### 6.3 バグフィックス
- 🔴 発見されたバグの修正
- 🔴 UI/UXの調整

---

## フェーズ7：デプロイ

### 7.1 Firebaseセットアップ
- 🟢 Firebaseプロジェクト作成
- 🟢 Firebase CLI のインストール
- 🟢 firebase.json 設定ファイルの作成

### 7.2 ビルドとデプロイ
- 🔴 本番用ビルドの実行
- 🔴 Firebase Hosting へのデプロイ
- 🔴 本番環境での動作確認

### 7.3 ドメイン設定（任意）
- ⏸️ カスタムドメインの設定
- ⏸️ SSL証明書の確認

---

## 将来実装（優先度低）

### ヒント機能
- ⏸️ ヒントボタンの追加
- ⏸️ ステージごとのヒントコンテンツ作成
- ⏸️ ヒント表示回数の制限

### 英語版対応
- ⏸️ i18n ライブラリの導入
- ⏸️ 英語翻訳の作成
- ⏸️ 言語切り替え機能

### モバイル対応
- ⏸️ レスポンシブデザインの最適化
- ⏸️ タッチ操作の改善
- ⏸️ モバイルブラウザでのテスト

---

## 進捗メモ

### 実装上の注意点
- [ ] ダークパターンの演出は「わざと使いにくく」するが、ゲームとして楽しめるバランスを保つ
- [ ] 各ステージのクリア条件は明確に（プレイヤーが完全に詰まらないように）
- [ ] パフォーマンスを考慮し、不要なリレンダリングを避ける

### 検討事項
- [x] ステージ5の謎解きギミックの詳細仕様（実装済み：「4545」を入力）
- [ ] サウンドの有無（優先度低として扱う）
- [ ] アニメーションの細かい演出

---

## 実装完了状況サマリー

### ✅ 完了した機能
- プロジェクト基盤構築（環境、ディレクトリ、ルーティング、状態管理）
- スタート画面（ニックネーム入力、ランダム名前生成）
- 全5ステージの実装（各種ダークパターンを含む）
- 結果画面（クリア時間表示、SNS共有機能）
- Firebase Hosting設定
- **デザインテーマの統一（Corporate Nightmare）**
  - デザイントークンファイル作成 (`src/styles/design-tokens.css`)
  - 全ステージのCSS変更（Stage1-4完了、Stage5は旧デザイン残存）
  - StartPageとResultPageのCSS変更
  - ブルータリストデザイン（硬質なボーダー、シャドウ、大文字テキスト）

### 🟡 部分完了
- アニメーション（ホバーエフェクト、一部演出のみ）
- アクセシビリティ（基本的なキーボード操作のみ）
- デザインテーマ統一（Stage5のみ旧グラデーションデザイン残存）

### 🔴 未実装
- ESLint/Prettier設定
- 画像アセット
- モーダルコンポーネント
- ローカルストレージ機能
- ページ遷移アニメーション
- ARIAラベル
- 本番デプロイ
- Stage5のCorporate Nightmareテーマ適用

---

## 最近の変更履歴

### 2025-12-20 (2) - インタラクティブ機能追加
- ヒント表示の改善
  - `HintToggle`コンポーネントを作成
  - 全ステージのヒントを初期非表示に変更
  - 「ヒントを見る」ボタンで表示/非表示を切り替え可能
- ダミーページモーダルの実装
  - `DummyPageModal`コンポーネントを作成
  - Stage1とStage2で退会に関係ないリンクにダミーページを追加
  - モーダルでコンテンツを表示し、「戻る」ボタンで閉じる
- 対応ファイル:
  - `src/components/DummyPageModal.tsx` (新規作成)
  - `src/components/DummyPageModal.css` (新規作成)
  - `src/components/HintToggle.tsx` (新規作成)
  - `src/components/HintToggle.css` (新規作成)
  - `src/stages/Stage1/Stage1.tsx` (ダミーページ追加、ヒントトグル実装)
  - `src/stages/Stage2/Stage2.tsx` (ダミーページ追加、ヒントトグル実装)
  - `src/stages/Stage3/Stage3.tsx` (ヒントトグル実装)
  - `src/stages/Stage4/Stage4.tsx` (ヒントトグル実装)
  - `src/stages/Stage5/Stage5.tsx` (ヒントトグル実装)

### 2025-12-20 (1) - デザインテーマ統一作業
- `docs/design.md` に基づいてCorporate Nightmareテーマを適用
- CSS変数を使ったデザイントークンシステムの導入
- 主な変更点:
  - カラーパレット: オフホワイト背景、ほぼ黒テキスト、深い赤の警告色
  - タイポグラフィ: 大文字変換、ワイドレタースペーシング、太字フォント
  - シャドウ: ブルータルシャドウ (`8px 8px 0 #1a1a1a`)
  - ボーダー: 角丸なし、2-3pxの硬質ボーダー
- 対応ファイル:
  - `src/styles/design-tokens.css` (新規作成)
  - `src/index.css` (デザイントークンのインポート追加)
  - `src/stages/Stage1/Stage1.css` (完全リファクタリング)
  - `src/stages/Stage2/Stage2.css` (完全リファクタリング)
  - `src/stages/Stage3/Stage3.css` (完全リファクタリング)
  - `src/stages/Stage4/Stage4.css` (完全リファクタリング)
  - `src/pages/StartPage.css` (完全リファクタリング)
  - `src/pages/ResultPage.css` (完全リファクタリング)
- 未対応: `src/stages/Stage5/Stage5.css` (旧デザインのまま)

### 2025-12-20 (3) - ステージ5の再設計と実装
- ステージ5のみを「規約スクロール地獄」に改修（他ステージは既存維持）
- 新仕様:
  - **ステージ5**: 規約スクロール地獄
    - 長文の利用規約（第1条〜第12条）を表示
    - 第7条の文中に隠された「退会」リンクが正解
    - 最下部までスクロールすると「同意して退会」ボタン出現（フェイク）
    - フェイクボタンクリックで「処理中...」→「エラー」表示
    - Corporate Nightmareテーマを適用
- 対応ファイル:
  - `src/stages/Stage5/Stage5.tsx` (完全書き換え)
  - `src/stages/Stage5/Stage5.css` (完全書き換え)
  - `docs/stage-redesign.md` (新規作成、参考用)

### 2025-12-25 (4) - 結果画面メッセージの変更
- ResultPageのエンディングメッセージを哲学的な内容に変更
- 旧メッセージ: ダークパターンについての説明的な文章
- 新メッセージ: 自由意志と選択についての問いかけ
  - 「しかし、あなたは本当に自由になったのでしょうか...？」
  - 「「退会する」を選んだあなたは自由ですか？それとも、選択させられただけですか？」
  - 「自由意志とは、用意された選択肢の中から選ぶことではありません。」
- 対応ファイル:
  - `src/pages/ResultPage.tsx` (result-messageセクションのみ変更)

### 2025-12-25 (5) - デプロイとファビコン設定
- Firebase Hostingへのデプロイ完了
- デプロイURL設定:
  - `firebase.json`に`"site": "un-subscribe"`を追加
  - デプロイ先: https://un-subscribe.web.app
- ファビコン更新:
  - 檻から手が脱出するデザインのファビコンに変更
  - `ファビコン.jpg`をfavicon.ico、logo192.png、logo512.pngに変換
  - タイトル: "The Unsubscribe"
  - 説明文: "退会できるか？ダークパターンの迷宮を抜け出せ。"
  - テーマカラー: #000000
- 対応ファイル:
  - `firebase.json` (site設定追加)
  - `public/favicon.ico` (更新)
  - `public/logo192.png` (更新)
  - `public/logo512.png` (更新)
  - `public/index.html` (タイトル、メタ説明更新)
  - `public/manifest.json` (アプリ名、テーマカラー更新)

---

**最終更新**: 2025-12-25
